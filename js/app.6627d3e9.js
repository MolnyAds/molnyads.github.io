(function(){"use strict";var a={1825:function(a,e,t){var s=t(5130),n=t(2261),l=t(6768),c=t(7661);const i=(0,n.nY)("app",{state:()=>({tgInitData:null,tgInitDataRow:null,apiBaseUrl:"https://molnyads.tech",balance:0}),actions:{async initTelegram(){if(!this.tgInitData){const e=window.Telegram?.WebApp;e&&(e.ready(),e.expand());try{const a=await(0,c.aO)(),e=await(0,c.t1)();this.tgInitData=a,this.tgInitDataRow=e,console.log("Telegram launch params:",this.tgInitData),console.log("Telegram raw initData:",this.tgInitDataRow),await this.fetchBalance()}catch(a){console.error("Cannot retrieve Telegram launch params:",a)}}},async fetchBalance(){const a={"Content-Type":"application/json",Authorization:"Telegram-Init-Data "+this.tgInitDataRow};try{const e=await fetch(`${this.apiBaseUrl}/api/my/balance`,{headers:a,mode:"cors"});if(!e.ok)throw new Error(`Status ${e.status}`);const t=await e.json();this.balance=t.balance}catch(e){console.error("Error fetching balance:",e)}}}}),o={id:"app"};var r={__name:"App",setup(a){const e=i();return(0,l.sV)((()=>{e.initTelegram()})),(a,e)=>{const t=(0,l.g2)("router-view");return(0,l.uX)(),(0,l.CE)("div",o,[(0,l.bF)(t)])}}};const u=r;var d=u,v=t(1387),p=t(144),k=t(4232);const h={class:"container"},m={class:"header"},L={class:"profile-icon"},_=["src","alt"],b={key:1},g={class:"balance-section"},f={class:"balance-info"},y={class:"balance-amount"},w={class:"menu-items"};var C={__name:"Home",setup(a){const e=i();return(0,l.sV)((()=>{fetch(`${e.apiBaseUrl}/api/user`,{headers:{Authorization:"Telegram-Init-Data "+e.tgInitDataRow},mode:"cors"}).then((a=>a.ok?a.json():Promise.reject())).then((a=>{})).catch((()=>{}))})),(a,t)=>{const s=(0,l.g2)("router-link");return(0,l.uX)(),(0,l.CE)("div",h,[(0,l.Lk)("div",m,[t[0]||(t[0]=(0,l.Lk)("div",{class:"logo"},[(0,l.Lk)("div",{class:"logo-icon"},"📢"),(0,l.Lk)("div",{class:"logo-text"},"Molny ADS")],-1)),(0,l.Lk)("div",L,[(0,p.R1)(e).tgInitData?.tgWebAppData?.user?.photo_url?((0,l.uX)(),(0,l.CE)("img",{key:0,src:(0,p.R1)(e).tgInitData.tgWebAppData.user.photo_url,alt:(0,p.R1)(e).tgInitData.tgWebAppData.user.first_name||"user"},null,8,_)):((0,l.uX)(),(0,l.CE)("span",b,"👤"))])]),(0,l.bF)(s,{to:"/balance"},{default:(0,l.k6)((()=>[(0,l.Lk)("div",g,[(0,l.Lk)("div",f,[t[1]||(t[1]=(0,l.Lk)("h3",null,"Мой баланс:",-1)),(0,l.Lk)("div",y,(0,k.v_)((0,p.R1)(e).balance)+"₽",1)]),(0,l.bF)(s,{to:"/topup"},{default:(0,l.k6)((()=>t[2]||(t[2]=[(0,l.Lk)("div",null,[(0,l.Lk)("button",{class:"top-up-btn"},"Пополнить")],-1)]))),_:1,__:[2]})])])),_:1}),(0,l.Lk)("div",w,[(0,l.bF)(s,{to:"/mychannels",class:"menu-item"},{default:(0,l.k6)((()=>t[3]||(t[3]=[(0,l.Lk)("div",{class:"menu-icon channels"},"📱",-1),(0,l.Lk)("div",{class:"menu-text"},"Мои каналы",-1),(0,l.Lk)("div",{class:"menu-arrow"},"›",-1)]))),_:1,__:[3]}),(0,l.bF)(s,{to:"/catalog",class:"menu-item"},{default:(0,l.k6)((()=>t[4]||(t[4]=[(0,l.Lk)("div",{class:"menu-icon ads"},"✈️",-1),(0,l.Lk)("div",{class:"menu-text"},"Купить рекламу",-1),(0,l.Lk)("div",{class:"menu-arrow"},"›",-1)]))),_:1,__:[4]}),(0,l.bF)(s,{to:"/adcatalog",class:"menu-item"},{default:(0,l.k6)((()=>t[5]||(t[5]=[(0,l.Lk)("div",{class:"menu-icon purchases"},"🛒",-1),(0,l.Lk)("div",{class:"menu-text"},"Мои покупки",-1),(0,l.Lk)("div",{class:"menu-arrow"},"›",-1)]))),_:1,__:[5]}),(0,l.bF)(s,{to:"/profile",class:"menu-item"},{default:(0,l.k6)((()=>t[6]||(t[6]=[(0,l.Lk)("div",{class:"menu-icon profile"},"👤",-1),(0,l.Lk)("div",{class:"menu-text"},"Профиль",-1),(0,l.Lk)("div",{class:"menu-arrow"},"›",-1)]))),_:1,__:[6]})]),t[7]||(t[7]=(0,l.Lk)("div",{class:"notifications"},[(0,l.Lk)("div",{class:"notifications-text"},[(0,l.eW)(" Новые заявки: "),(0,l.Lk)("span",{class:"notifications-count"},"2")])],-1))])}}};const R=C;var j=R;const E={class:"container"},U={class:"balance-page-header"},I={class:"balance-card"},$={class:"balance-info-main"},D={class:"balance-amount-main"},K={class:"history-section"},T={class:"transaction-list"},B={class:"transaction-details"},X={class:"transaction-title"},S={class:"transaction-date"};var F={__name:"Balance",setup(a){const e=i(),t=(0,p.KR)([]);function s(a){const e=new Date(a);return e.toLocaleString("ru-RU",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})}function n(a){return Math.abs(a).toLocaleString("ru-RU")}return(0,l.sV)((async()=>{await e.initTelegram();try{const a=await fetch(`${e.apiBaseUrl}/api/my/transactions?limit=30`,{headers:{Authorization:"Telegram-Init-Data "+e.tgInitDataRow},mode:"cors"});t.value=await a.json()}catch(a){console.error("Ошибка получения транзакций:",a)}})),(a,c)=>{const i=(0,l.g2)("router-link");return(0,l.uX)(),(0,l.CE)("div",E,[(0,l.bF)(i,{to:"/",class:"back-btn"},{default:(0,l.k6)((()=>c[0]||(c[0]=[(0,l.eW)("←")]))),_:1,__:[0]}),(0,l.Lk)("div",U,[c[3]||(c[3]=(0,l.Lk)("div",{class:"balance-page-title"},"Баланс",-1)),(0,l.Lk)("div",I,[(0,l.Lk)("div",$,[c[1]||(c[1]=(0,l.Lk)("div",{class:"balance-label"},"Ваш баланс",-1)),(0,l.Lk)("div",D,(0,k.v_)((0,p.R1)(e).balance)+" ₽",1)]),c[2]||(c[2]=(0,l.Lk)("button",{class:"withdraw-btn"},"Вывести",-1))])]),(0,l.Lk)("div",K,[c[4]||(c[4]=(0,l.Lk)("div",{class:"history-title"},"История операций",-1)),(0,l.Lk)("div",T,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(t.value,(a=>((0,l.uX)(),(0,l.CE)("div",{class:"transaction-item",key:a.id},[(0,l.Lk)("div",{class:(0,k.C4)(["transaction-icon",a.amount>=0?"income":"expense"])},(0,k.v_)(a.amount>=0?"+":"−"),3),(0,l.Lk)("div",B,[(0,l.Lk)("div",X,(0,k.v_)(a.amount>=0?"Пополнение":"Списание"),1),(0,l.Lk)("div",S,(0,k.v_)(s(a.created_at)),1)]),(0,l.Lk)("div",{class:(0,k.C4)(["transaction-amount",a.amount>=0?"income":"expense"])},(0,k.v_)(n(a.amount))+" ₽ ",3)])))),128))])])])}}};const O=F;var W=O;t(8111),t(2489),t(116),t(7588),t(1701);const V={class:"container"},x={class:"catalog-header"},A={class:"search-filters"},P={class:"search-bar"},z={class:"filter-row"},M=["value"],J={class:"channels-grid"},N={class:"channel-card"},q={class:"channel-name"},H={class:"channel-category"},G={class:"channel-meta"},Q={class:"channel-sales"},Y={class:"pagination"},Z=["onClick"],aa=10;var ea={__name:"Mychannels",setup(a){const e=i(),t=(0,p.KR)([]),n=(0,p.KR)([]),c=(0,p.KR)([]),o=(0,p.KR)([]),r=(0,p.KR)(""),u=(0,p.KR)("desc"),d=(0,p.KR)(1),v=(0,p.KR)(1),h=(0,p.KR)([]),m=()=>({Authorization:"Telegram-Init-Data "+e.tgInitDataRow}),L=a=>(a||[]).map((a=>t.value.find((e=>e.id===a))?.name)).filter(Boolean).join(", "),_=a=>n.value.find((e=>e.id===a))?.name||"—",b=a=>c.value.find((e=>e.id===a))?.name||"—";async function g(){const a=await fetch(`${e.apiBaseUrl}/api/tables/subjects`,{headers:m(),mode:"cors"});t.value=await a.json()}async function f(){const a=await fetch(`${e.apiBaseUrl}/api/tables/countries`,{headers:m(),mode:"cors"});n.value=await a.json()}async function y(){const a=await fetch(`${e.apiBaseUrl}/api/tables/languages`,{headers:m(),mode:"cors"});c.value=await a.json()}async function w(){const a=new URLSearchParams;r.value&&a.append("search",r.value),o.value.forEach((e=>a.append("subject_ids",e)));const t=await fetch(`${e.apiBaseUrl}/api/my/groups/count?${a.toString()}`,{headers:m(),mode:"cors"}),s=await t.json();v.value=Math.ceil(s.count/aa)||1}async function C(){const a=new URLSearchParams({page:d.value,limit:aa,sort_by_sales:u.value});r.value&&a.append("search",r.value),o.value.forEach((e=>a.append("subject_ids",e)));const t=await fetch(`${e.apiBaseUrl}/api/my/groups?${a.toString()}`,{headers:m(),mode:"cors"});h.value=await t.json()}return(0,l.sV)((async()=>{await e.initTelegram(),await Promise.all([g(),f(),y()]),await w(),await C()})),(0,l.wB)([r,o,u],(async()=>{d.value=1,await w(),await C()})),(0,l.wB)(d,C),(a,e)=>{const n=(0,l.g2)("router-link");return(0,l.uX)(),(0,l.CE)("div",V,[(0,l.bF)(n,{to:"/",class:"back-btn"},{default:(0,l.k6)((()=>e[3]||(e[3]=[(0,l.eW)("←")]))),_:1,__:[3]}),(0,l.Lk)("div",x,[e[7]||(e[7]=(0,l.Lk)("h1",{class:"catalog-title"},"Мои каналы",-1)),(0,l.Lk)("div",A,[(0,l.Lk)("div",P,[e[4]||(e[4]=(0,l.Lk)("span",{class:"search-icon"},"🔍",-1)),(0,l.bo)((0,l.Lk)("input",{type:"text",class:"search-input",placeholder:"Поиск по названию","onUpdate:modelValue":e[0]||(e[0]=a=>r.value=a)},null,512),[[s.Jo,r.value]])]),(0,l.Lk)("div",z,[(0,l.bo)((0,l.Lk)("select",{class:"filter-select","onUpdate:modelValue":e[1]||(e[1]=a=>o.value=a)},[e[5]||(e[5]=(0,l.Lk)("option",{value:""},"Все тематики",-1)),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(t.value,(a=>((0,l.uX)(),(0,l.CE)("option",{key:a.id,value:a.id},(0,k.v_)(a.name),9,M)))),128))],512),[[s.u1,o.value]]),(0,l.bo)((0,l.Lk)("select",{class:"filter-select","onUpdate:modelValue":e[2]||(e[2]=a=>u.value=a)},e[6]||(e[6]=[(0,l.Lk)("option",{value:"desc"},"По количеству продаж (по убыванию)",-1),(0,l.Lk)("option",{value:"asc"},"По количеству продаж (по возрастанию)",-1)]),512),[[s.u1,u.value]])])])]),(0,l.Lk)("div",J,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(h.value,(a=>((0,l.uX)(),(0,l.Wv)(n,{to:`/mychannel/${a.id}`,key:a.id},{default:(0,l.k6)((()=>[(0,l.Lk)("div",N,[e[8]||(e[8]=(0,l.Lk)("div",{class:"channel-card-icon business"},"💼",-1)),(0,l.Lk)("div",q,(0,k.v_)(a.username),1),(0,l.Lk)("div",H,(0,k.v_)(L(a.subject_ids)),1),(0,l.Lk)("div",G,(0,k.v_)(_(a.country_id))+" / "+(0,k.v_)(b(a.language_id)),1),(0,l.Lk)("div",Q,(0,k.v_)(a.sales_count)+" продаж ",1)])])),_:2},1032,["to"])))),128))]),(0,l.Lk)("div",Y,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(v.value,(a=>((0,l.uX)(),(0,l.CE)("button",{class:(0,k.C4)(["page-btn",{active:d.value===a}]),key:a,onClick:e=>d.value=a},(0,k.v_)(a),11,Z)))),128))])])}}};const ta=ea;var sa=ta;const na={class:"container"},la={class:"catalog-header"},ca={class:"search-filters"},ia={class:"filter-dropdown"},oa={class:"ads-grid"},ra={class:"ad-card"},ua={class:"ad-type"},da={class:"ad-info"},va={class:"ad-title"},pa={class:"ad-date"},ka={class:"ad-price"},ha={class:"pagination"},ma=["onClick"],La=10;var _a={__name:"Adcatalog",setup(a){const e=i(),t=(0,p.KR)("time_desc"),n=(0,p.KR)(""),c=(0,p.KR)(1),o=(0,p.KR)(1),r=(0,p.KR)([]),u=()=>({Authorization:"Telegram-Init-Data "+e.tgInitDataRow});function d(a){const e=new Date(a);return e.toLocaleString("ru-RU",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})}function v(a){switch("completed"===a&&(a="published"),a){case"published":return"published";case"waiting":return"waiting";case"cancelled":return"cancelled";default:return""}}function h(a){switch("completed"===a&&(a="published"),a){case"published":return"Опубликовано";case"waiting":return"Ожидает";case"cancelled":return"Отменено";default:return a}}async function m(){const a=new URLSearchParams({sort_by:t.value,status:n.value}),s=await fetch(`${e.apiBaseUrl}/api/my/purchases/count?${a.toString()}`,{headers:u(),mode:"cors"}),l=await s.json();o.value=Math.ceil(l.count/La)||1}async function L(){const a=new URLSearchParams({page:c.value,limit:La,sort_by:t.value});n.value&&a.append("status",n.value);const s=await fetch(`${e.apiBaseUrl}/api/my/purchases?${a.toString()}`,{headers:u(),mode:"cors"});r.value=await s.json()}return(0,l.sV)((async()=>{await e.initTelegram(),await m(),await L()})),(0,l.wB)([t,n],(async()=>{c.value=1,await m(),await L()})),(0,l.wB)(c,L),(a,e)=>{const i=(0,l.g2)("router-link");return(0,l.uX)(),(0,l.CE)("div",na,[(0,l.bF)(i,{to:"/",class:"back-btn"},{default:(0,l.k6)((()=>e[2]||(e[2]=[(0,l.eW)("←")]))),_:1,__:[2]}),(0,l.Lk)("div",la,[e[5]||(e[5]=(0,l.Lk)("h1",{class:"catalog-title"},"Каталог реклам",-1)),(0,l.Lk)("div",ca,[(0,l.Lk)("div",ia,[(0,l.bo)((0,l.Lk)("select",{class:"filter-btn","onUpdate:modelValue":e[0]||(e[0]=a=>t.value=a)},e[3]||(e[3]=[(0,l.Lk)("option",{value:"time_desc"},"Сначала новые",-1),(0,l.Lk)("option",{value:"time_asc"},"Сначала старые",-1)]),512),[[s.u1,t.value]]),(0,l.bo)((0,l.Lk)("select",{class:"filter-btn","onUpdate:modelValue":e[1]||(e[1]=a=>n.value=a)},e[4]||(e[4]=[(0,l.Lk)("option",{value:""},"Все статусы",-1),(0,l.Lk)("option",{value:"published"},"Опубликовано",-1),(0,l.Lk)("option",{value:"waiting"},"Ожидает",-1),(0,l.Lk)("option",{value:"cancelled"},"Отменено",-1)]),512),[[s.u1,n.value]])])])]),(0,l.Lk)("div",oa,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(r.value,(a=>((0,l.uX)(),(0,l.Wv)(i,{key:a.id,to:`/myad/${a.id}`},{default:(0,l.k6)((()=>[(0,l.Lk)("div",ra,[(0,l.Lk)("div",ua,(0,k.v_)(a.schedule)+"/"+(0,k.v_)(a.group_slots),1),e[6]||(e[6]=(0,l.Lk)("div",{class:"ad-icon"},"📢",-1)),(0,l.Lk)("div",da,[(0,l.Lk)("div",va,(0,k.v_)(a.group_username),1),(0,l.Lk)("div",pa,(0,k.v_)(d(a.placement_date)),1)]),(0,l.Lk)("div",ka,(0,k.v_)(a.ad_cost)+" ₽",1),(0,l.Lk)("div",{class:(0,k.C4)(["ad-status",v(a.status)])},(0,k.v_)(h(a.status)),3)])])),_:2},1032,["to"])))),128))]),(0,l.Lk)("div",ha,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(o.value,(a=>((0,l.uX)(),(0,l.CE)("button",{class:(0,k.C4)(["page-btn",{active:c.value===a}]),key:a,onClick:e=>c.value=a},(0,k.v_)(a),11,ma)))),128))])])}}};const ba=_a;var ga=ba;const fa={class:"container"},ya={class:"catalog-header"},wa={class:"search-filters"},Ca={class:"search-bar"},Ra={class:"filter-row"},ja={class:"channels-grid"},Ea={class:"channel-card"},Ua={class:"channel-name"},Ia={class:"channel-category"},$a={class:"channel-price"},Da={class:"pagination"},Ka=["onClick"],Ta=10;var Ba={__name:"Catalog",setup(a){const e=i(),t=(0,p.KR)(""),n=(0,p.KR)("price_desc"),c=(0,p.KR)(1),o=(0,p.KR)(1),r=(0,p.KR)([]),u=()=>({Authorization:"Telegram-Init-Data "+e.tgInitDataRow});function d(a){if(!a)return 0;const e=Object.values(a);return e.length?Math.min(...e):0}async function v(){const a=new URLSearchParams({search:t.value}),s=await fetch(`${e.apiBaseUrl}/api/catalog/count?${a.toString()}`,{headers:u(),mode:"cors"}),n=await s.json();o.value=Math.ceil(n.count/Ta)||1}async function h(){const a=new URLSearchParams({page:c.value,limit:Ta,search:t.value,sort_by:n.value}),s=await fetch(`${e.apiBaseUrl}/api/catalog?${a.toString()}`,{headers:u(),mode:"cors"});r.value=await s.json()}return(0,l.sV)((async()=>{await e.initTelegram(),await v(),await h()})),(0,l.wB)([t,n],(async()=>{c.value=1,await v(),await h()})),(0,l.wB)(c,h),(a,e)=>{const i=(0,l.g2)("router-link");return(0,l.uX)(),(0,l.CE)("div",fa,[(0,l.bF)(i,{to:"/",class:"back-btn"},{default:(0,l.k6)((()=>e[2]||(e[2]=[(0,l.eW)("←")]))),_:1,__:[2]}),(0,l.Lk)("div",ya,[e[5]||(e[5]=(0,l.Lk)("h1",{class:"catalog-title"},"Каталог",-1)),(0,l.Lk)("div",wa,[(0,l.Lk)("div",Ca,[e[3]||(e[3]=(0,l.Lk)("span",{class:"search-icon"},"🔍",-1)),(0,l.bo)((0,l.Lk)("input",{type:"text",class:"search-input",placeholder:"Поиск по названию","onUpdate:modelValue":e[0]||(e[0]=a=>t.value=a)},null,512),[[s.Jo,t.value]])]),(0,l.Lk)("div",Ra,[(0,l.bo)((0,l.Lk)("select",{class:"filter-select","onUpdate:modelValue":e[1]||(e[1]=a=>n.value=a)},e[4]||(e[4]=[(0,l.Lk)("option",{value:"price_desc"},"По цене (убыванию)",-1),(0,l.Lk)("option",{value:"price_asc"},"По цене (возрастанию)",-1),(0,l.Lk)("option",{value:"subs_desc"},"По подписчикам (убыванию)",-1),(0,l.Lk)("option",{value:"subs_asc"},"По подписчикам (возрастанию)",-1)]),512),[[s.u1,n.value]])])])]),(0,l.Lk)("div",ja,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(r.value,(a=>((0,l.uX)(),(0,l.Wv)(i,{key:a.id,to:`/channel/${a.id}`},{default:(0,l.k6)((()=>[(0,l.Lk)("div",Ea,[e[6]||(e[6]=(0,l.Lk)("div",{class:"channel-card-icon business"},"💼",-1)),(0,l.Lk)("div",Ua,(0,k.v_)(a.username),1),(0,l.Lk)("div",Ia,(0,k.v_)(a.subscribers)+" подписчиков / "+(0,k.v_)(a.avg_views)+" просмотров ",1),(0,l.Lk)("div",$a," от "+(0,k.v_)(d(a.ad_prices))+" ₽ ",1)])])),_:2},1032,["to"])))),128))]),(0,l.Lk)("div",Da,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(o.value,(a=>((0,l.uX)(),(0,l.CE)("button",{class:(0,k.C4)(["page-btn",{active:c.value===a}]),key:a,onClick:e=>c.value=a},(0,k.v_)(a),11,Ka)))),128))])])}}};const Xa=Ba;var Sa=Xa;const Fa={class:"container"},Oa={class:"purchase-header"},Wa={key:0,class:"purchase-card"},Va={class:"purchase-card-header"},xa={class:"purchase-channel-info"},Aa={class:"purchase-channel-name"},Pa={class:"purchase-slot-info"},za={class:"purchase-price"},Ma={class:"purchase-details"},Ja={class:"purchase-detail-row"},Na={class:"purchase-detail-value"},qa={class:"purchase-detail-row"},Ha={class:"purchase-detail-value"};var Ga={__name:"Myad",setup(a){const e=i(),t=(0,v.lq)(),s=t.params.id,n=(0,p.KR)(null),c=()=>({Authorization:"Telegram-Init-Data "+e.tgInitDataRow});function o(a){const e=new Date(a);return e.toLocaleDateString("ru-RU",{day:"numeric",month:"long",year:"numeric"})}function r(a){switch(a){case"published":return"published";case"waiting":return"waiting";case"cancelled":return"cancelled";default:return""}}function u(a){switch(a){case"published":return"Опубликовано";case"waiting":return"Ожидает";case"cancelled":return"Отменено";default:return a}}async function d(){const a=await fetch(`${e.apiBaseUrl}/api/my/purchases/${s}`,{headers:c(),mode:"cors"});n.value=await a.json()}function h(){console.log("View post for",n.value.id)}function m(){console.log("Contact support")}return(0,l.sV)((async()=>{await e.initTelegram(),await d()})),(a,e)=>{const t=(0,l.g2)("router-link");return(0,l.uX)(),(0,l.CE)("div",Fa,[(0,l.bF)(t,{to:"/adcatalog",class:"back-btn"},{default:(0,l.k6)((()=>e[0]||(e[0]=[(0,l.eW)("←")]))),_:1,__:[0]}),(0,l.Lk)("div",Oa,[e[4]||(e[4]=(0,l.Lk)("div",{class:"purchase-title"},"Детали покупки",-1)),n.value?((0,l.uX)(),(0,l.CE)("div",Wa,[(0,l.Lk)("div",Va,[e[1]||(e[1]=(0,l.Lk)("div",{class:"purchase-channel-icon"},"📢",-1)),(0,l.Lk)("div",xa,[(0,l.Lk)("div",Aa,(0,k.v_)(n.value.group_username),1),(0,l.Lk)("div",Pa,(0,k.v_)(n.value.schedule)+"/24",1)]),(0,l.Lk)("div",za,(0,k.v_)(n.value.ad_cost)+" ₽",1)]),(0,l.Lk)("div",Ma,[(0,l.Lk)("div",Ja,[e[2]||(e[2]=(0,l.Lk)("div",{class:"purchase-detail-label"},"Дата покупки:",-1)),(0,l.Lk)("div",Na,[(0,l.Lk)("span",{class:(0,k.C4)(["status-badge",r(n.value.status)])},(0,k.v_)(u(n.value.status)),3)])]),(0,l.Lk)("div",qa,[e[3]||(e[3]=(0,l.Lk)("div",{class:"purchase-detail-label"},"Плановая дата:",-1)),(0,l.Lk)("div",Ha,(0,k.v_)(o(n.value.placement_date)),1)])])])):(0,l.Q3)("",!0)]),(0,l.Lk)("div",{class:"purchase-actions"},[(0,l.Lk)("button",{class:"purchase-action-btn secondary",onClick:h},"Посмотреть пост"),(0,l.Lk)("button",{class:"purchase-action-btn primary",onClick:m},"Контакт с поддержкой")])])}}};const Qa=Ga;var Ya=Qa;const Za={class:"container"},ae={class:"stats-container"},ee={class:"stats-block"},te={class:"stats-data"},se={class:"stat-item"},ne={class:"stat-value"},le={class:"stat-item"},ce={class:"stat-value"},ie={class:"stat-item"},oe={class:"stat-value"},re={class:"stat-item"},ue={class:"stat-value"},de={class:"stat-item"},ve={class:"stat-value"},pe={class:"stats-block"},ke={class:"stats-data"},he={class:"stat-label"},me={class:"stat-value"},Le={class:"stats-block"},_e={class:"stats-data"},be={class:"stat-item"},ge={class:"stat-value"},fe={class:"stat-item"},ye={class:"stat-value"},we={class:"stats-block"},Ce={class:"stats-data"},Re={class:"stat-item"},je={class:"stat-value"},Ee={class:"stat-item"},Ue={class:"stat-value"};var Ie={__name:"Profile",setup(a){i();const e=(0,p.Kh)({total_ads:0,bought_ads:0,active_orders:0,cancelled_orders:0,average_price:0,ad_type_purchases:{},total_sales:0,total_revenue:0,sales_last_30_days:0,revenue_last_30_days:0});return(0,l.sV)((async()=>{const a=i(),t={Authorization:"Telegram-Init-Data "+a.tgInitDataRow};try{const s=await fetch(`${a.apiBaseUrl}/api/my/stats`,{headers:t,mode:"cors"}),n=await s.json();Object.assign(e,n);const l=await fetch(`${a.apiBaseUrl}/api/tables/ad_types`,{headers:t,mode:"cors"}),c=await l.json(),i={};c.forEach((a=>{i[a.id]=e.ad_type_purchases[a.id]||0})),e.ad_type_purchases=i}catch(s){console.error("Ошибка при загрузке статистики профиля:",s)}})),(a,t)=>{const s=(0,l.g2)("router-link");return(0,l.uX)(),(0,l.CE)("div",Za,[(0,l.bF)(s,{to:"/",class:"back-btn"},{default:(0,l.k6)((()=>t[0]||(t[0]=[(0,l.eW)("←")]))),_:1,__:[0]}),t[14]||(t[14]=(0,l.Lk)("div",{class:"catalog-header"},[(0,l.Lk)("h1",{class:"catalog-title"},"Профиль")],-1)),(0,l.Lk)("div",ae,[(0,l.Lk)("div",ee,[t[6]||(t[6]=(0,l.Lk)("div",{class:"stats-block-title"},"Общая активность",-1)),(0,l.Lk)("div",te,[(0,l.Lk)("div",se,[t[1]||(t[1]=(0,l.Lk)("span",{class:"stat-label"},"Всего объявлений:",-1)),(0,l.Lk)("span",ne,(0,k.v_)(e.total_ads),1)]),(0,l.Lk)("div",le,[t[2]||(t[2]=(0,l.Lk)("span",{class:"stat-label"},"Куплено объявлений:",-1)),(0,l.Lk)("span",ce,(0,k.v_)(e.bought_ads),1)]),(0,l.Lk)("div",ie,[t[3]||(t[3]=(0,l.Lk)("span",{class:"stat-label"},"Активные заказы:",-1)),(0,l.Lk)("span",oe,(0,k.v_)(e.active_orders),1)]),(0,l.Lk)("div",re,[t[4]||(t[4]=(0,l.Lk)("span",{class:"stat-label"},"Отменённые заказы:",-1)),(0,l.Lk)("span",ue,(0,k.v_)(e.cancelled_orders),1)]),(0,l.Lk)("div",de,[t[5]||(t[5]=(0,l.Lk)("span",{class:"stat-label"},"Средняя цена размещения:",-1)),(0,l.Lk)("span",ve,(0,k.v_)(e.average_price)+" ₽",1)])])]),(0,l.Lk)("div",pe,[t[7]||(t[7]=(0,l.Lk)("div",{class:"stats-block-title"},"Покупка рекламы по типам",-1)),(0,l.Lk)("div",ke,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.ad_type_purchases,((a,e)=>((0,l.uX)(),(0,l.CE)("div",{key:e,class:"stat-item"},[(0,l.Lk)("span",he,"Тип "+(0,k.v_)(e)+":",1),(0,l.Lk)("span",me,(0,k.v_)(a),1)])))),128))])]),(0,l.Lk)("div",Le,[t[10]||(t[10]=(0,l.Lk)("div",{class:"stats-block-title"},"Продажи",-1)),(0,l.Lk)("div",_e,[(0,l.Lk)("div",be,[t[8]||(t[8]=(0,l.Lk)("span",{class:"stat-label"},"Всего продаж:",-1)),(0,l.Lk)("span",ge,(0,k.v_)(e.total_sales),1)]),(0,l.Lk)("div",fe,[t[9]||(t[9]=(0,l.Lk)("span",{class:"stat-label"},"Выручка всего:",-1)),(0,l.Lk)("span",ye,(0,k.v_)(e.total_revenue)+" ₽",1)])])]),(0,l.Lk)("div",we,[t[13]||(t[13]=(0,l.Lk)("div",{class:"stats-block-title"},"За последние 30 дней",-1)),(0,l.Lk)("div",Ce,[(0,l.Lk)("div",Re,[t[11]||(t[11]=(0,l.Lk)("span",{class:"stat-label"},"Продаж:",-1)),(0,l.Lk)("span",je,(0,k.v_)(e.sales_last_30_days),1)]),(0,l.Lk)("div",Ee,[t[12]||(t[12]=(0,l.Lk)("span",{class:"stat-label"},"Выручка:",-1)),(0,l.Lk)("span",Ue,(0,k.v_)(e.revenue_last_30_days)+" ₽",1)])])])])])}}};const $e=Ie;var De=$e;const Ke={class:"container"},Te={class:"channel-header"},Be={class:"channel-title"},Xe={class:"channel-info"},Se={class:"info-row"},Fe={class:"info-row"},Oe={class:"channel-visual"},We={class:"channel-links"},Ve={class:"link-item"},xe={class:"link-text"},Ae=["href"],Pe={class:"link-item"},ze={class:"link-text"},Me=["href"],Je={class:"pricing-section"},Ne={class:"pricing-items"},qe={class:"pricing-label"},He={class:"pricing-value"};var Ge={__name:"Channel",setup(a){const e=i(),t=(0,v.lq)(),s=Number(t.params.id),n=(0,p.Kh)({username:"",subject_ids:[],country_id:null,language_id:null,ad_prices:{}}),c=(0,p.KR)([]),o=(0,p.KR)([]),r=(0,p.KR)([]),u=["Пост","Закреплённый пост","Упоминание"],d=()=>({Authorization:"Telegram-Init-Data "+e.tgInitDataRow,"Content-Type":"application/json"});async function h(){const a=await fetch(`${e.apiBaseUrl}/api/tables/subjects`,{headers:d(),mode:"cors"});c.value=await a.json()}async function m(){const a=await fetch(`${e.apiBaseUrl}/api/tables/countries`,{headers:d(),mode:"cors"});o.value=await a.json()}async function L(){const a=await fetch(`${e.apiBaseUrl}/api/tables/languages`,{headers:d(),mode:"cors"});r.value=await a.json()}async function _(){const a=await fetch(`${e.apiBaseUrl}/api/group/${s}`,{headers:d(),mode:"cors"}),t=await a.json();Object.assign(n,t)}const b=(0,l.EW)((()=>n.subject_ids.map((a=>c.value.find((e=>e.id===a))?.name||a)).join(" / "))),g=(0,l.EW)((()=>o.value.find((a=>a.id===n.country_id))?.name||"—")),f=(0,l.EW)((()=>r.value.find((a=>a.id===n.language_id))?.name||"—")),y=(0,l.EW)((()=>`https://t.me/${n.username}`)),w=(0,l.EW)((()=>`https://tgstat.com/channel/@${n.username}`));function C(a){const e=Object.keys(n.ad_prices)[a];return n.ad_prices[e]||0}return(0,l.sV)((async()=>{await e.initTelegram(),await Promise.all([h(),m(),L()]),await _()})),(a,e)=>{const t=(0,l.g2)("router-link");return(0,l.uX)(),(0,l.CE)("div",Ke,[(0,l.bF)(t,{to:"/catalog",class:"back-btn"},{default:(0,l.k6)((()=>e[0]||(e[0]=[(0,l.eW)("←")]))),_:1,__:[0]}),(0,l.Lk)("div",Te,[(0,l.Lk)("h1",Be,(0,k.v_)(n.username),1),(0,l.Lk)("div",Xe,[(0,l.Lk)("div",Se,[e[2]||(e[2]=(0,l.Lk)("span",{class:"info-icon"},"📁",-1)),(0,l.Lk)("span",null,[e[1]||(e[1]=(0,l.eW)(" Тематика: ")),(0,l.Lk)("strong",null,(0,k.v_)(b.value),1)])]),(0,l.Lk)("div",Fe,[e[4]||(e[4]=(0,l.Lk)("span",{class:"info-icon"},"🌍",-1)),(0,l.Lk)("span",null,[e[3]||(e[3]=(0,l.eW)(" Гео / Язык: ")),(0,l.Lk)("strong",null,(0,k.v_)(g.value)+" / "+(0,k.v_)(f.value),1)])])])]),(0,l.Lk)("div",Oe,[e[11]||(e[11]=(0,l.Lk)("div",{class:"channel-logo"},[(0,l.Lk)("div",{class:"megaphone-icon"},"📢")],-1)),(0,l.Lk)("div",We,[(0,l.Lk)("div",Ve,[e[7]||(e[7]=(0,l.Lk)("div",{class:"link-icon telegram-icon"},"✈",-1)),(0,l.Lk)("div",xe,[e[5]||(e[5]=(0,l.Lk)("strong",null,"t.me:",-1)),e[6]||(e[6]=(0,l.Lk)("br",null,null,-1)),(0,l.Lk)("a",{href:y.value,class:"link-url"},(0,k.v_)(y.value),9,Ae)])]),(0,l.Lk)("div",Pe,[e[10]||(e[10]=(0,l.Lk)("div",{class:"link-icon tgstat-icon"},"📊",-1)),(0,l.Lk)("div",ze,[e[8]||(e[8]=(0,l.Lk)("strong",null,"TGStat:",-1)),e[9]||(e[9]=(0,l.Lk)("br",null,null,-1)),(0,l.Lk)("a",{href:w.value,class:"link-url"},(0,k.v_)(w.value),9,Me)])])])]),(0,l.Lk)("div",Je,[e[12]||(e[12]=(0,l.Lk)("h2",{class:"pricing-title"},"Реклама:",-1)),(0,l.Lk)("div",Ne,[((0,l.uX)(),(0,l.CE)(l.FK,null,(0,l.pI)(u,((a,e)=>(0,l.Lk)("div",{key:e,class:"pricing-item"},[(0,l.Lk)("span",qe,(0,k.v_)(a)+":",1),(0,l.Lk)("span",He,(0,k.v_)(C(e))+" ₽",1)]))),64))])])])}}};const Qe=Ge;var Ye=Qe;t(4114);const Ze={class:"container"},at={class:"channel-header"},et={class:"channel-title"},tt={class:"channel-info-grid"},st={class:"info-card"},nt={class:"info-number"},lt={class:"info-card"},ct={class:"info-number"},it={class:"channel-actions"},ot={class:"schedule-section"},rt={class:"schedule-grid",ref:"grid"};var ut={__name:"Mychannel",setup(a){const e=i(),t=(0,v.lq)(),s=Number(t.params.id),n=(0,p.Kh)({username:"",subject_ids:[],country_id:null,language_id:null,ad_prices:{},subscribers:0,avg_views:0,all_slots_ids:[],busy_slots_ids:[]}),c=(0,p.KR)(!1),o=(0,p.KR)(null),r=()=>({"Content-Type":"application/json",Authorization:"Telegram-Init-Data "+e.tgInitDataRow});function u(){const a=o.value;a.innerHTML=""}async function d(){const a=[];o.value.querySelectorAll(".schedule-cell.active").forEach((e=>{a.push(e.dataset.slotId)}));try{await fetch(`${e.apiBaseUrl}/api/my/group/${s}/schedule`,{method:"POST",headers:r(),body:JSON.stringify({schedule_ids:a}),mode:"cors"}),alert("Расписание сохранено")}catch(t){console.error("Ошибка сохранения расписания:",t)}}async function h(){try{await fetch(`${e.apiBaseUrl}/api/my/group/${s}/edit`,{method:"POST",headers:r(),body:JSON.stringify({subject_ids:n.subject_ids,country_id:n.country_id,language_id:n.language_id,ad_prices:n.ad_prices}),mode:"cors"}),alert("Изменения сохранены")}catch(a){console.error("Ошибка сохранения группы:",a)}}async function m(){try{c.value=!c.value,await fetch(`${e.apiBaseUrl}/api/my/group/${s}/set_in_catalog`,{method:"POST",headers:r(),body:JSON.stringify({in_catalog:c.value}),mode:"cors"})}catch(a){console.error("Ошибка обновления каталога:",a)}}return(0,l.sV)((async()=>{await e.initTelegram();const a=await fetch(`${e.apiBaseUrl}/api/my/group/${s}`,{headers:r(),mode:"cors"});Object.assign(n,await a.json()),u()})),(a,e)=>{const t=(0,l.g2)("router-link");return(0,l.uX)(),(0,l.CE)("div",Ze,[(0,l.bF)(t,{to:"/mychannels",class:"back-btn"},{default:(0,l.k6)((()=>e[0]||(e[0]=[(0,l.eW)("←")]))),_:1,__:[0]}),(0,l.Lk)("div",at,[(0,l.Lk)("h1",et,(0,k.v_)(n.username),1),(0,l.Lk)("div",tt,[(0,l.Lk)("div",st,[(0,l.Lk)("div",nt,(0,k.v_)(n.subscribers),1),e[1]||(e[1]=(0,l.Lk)("div",{class:"info-label"},"Подписчики",-1))]),(0,l.Lk)("div",lt,[(0,l.Lk)("div",ct,(0,k.v_)(n.avg_views),1),e[2]||(e[2]=(0,l.Lk)("div",{class:"info-label"},"Просмотры",-1))])]),(0,l.Lk)("div",it,[(0,l.Lk)("button",{class:"action-btn secondary",onClick:h},"Сохранить изменения"),(0,l.Lk)("button",{class:"action-btn primary",onClick:m},(0,k.v_)(c.value?"Убрать из каталога":"Добавить в каталог"),1)])]),(0,l.Lk)("div",ot,[e[3]||(e[3]=(0,l.Lk)("div",{class:"schedule-title"},"Расписание публикаций",-1)),(0,l.Lk)("div",rt,null,512),(0,l.Lk)("button",{class:"action-btn primary",onClick:d,style:{"margin-top":"16px"}}," Сохранить расписание ")])])}}};const dt=ut;var vt=dt;const pt={class:"container"},kt={class:"topup-header"},ht={class:"form-section"},mt={class:"payment-methods"};var Lt={__name:"Topup",setup(a){const e=i(),t=(0,p.KR)(null),n=(0,p.KR)("ton");async function c(){if(!t.value||t.value<10)alert("Пожалуйста, укажите сумму не менее 10 ₽");else if(n.value)try{const a={"Content-Type":"application/json",Authorization:"Telegram-Init-Data "+e.tgInitDataRow},s=JSON.stringify({amount:t.value}),n=await fetch(`${e.apiBaseUrl}/api/my/balance/deposit`,{method:"POST",headers:a,body:s,mode:"cors"});if(!n.ok){const a=await n.text();throw new Error(a||"Ошибка пополнения")}alert("Баланс успешно пополнен на "+t.value+" ₽"),e.balance+=t.value,t.value=null}catch(a){console.error("Ошибка при пополнении баланса:",a),alert("Не удалось пополнить баланс: "+a.message)}else alert("Пожалуйста, выберите способ оплаты")}return(a,e)=>{const i=(0,l.g2)("router-link");return(0,l.uX)(),(0,l.CE)("div",pt,[(0,l.Lk)("div",kt,[(0,l.bF)(i,{to:"/",class:"back-btn"},{default:(0,l.k6)((()=>e[3]||(e[3]=[(0,l.eW)("←")]))),_:1,__:[3]}),e[4]||(e[4]=(0,l.Lk)("h1",null,"Пополнение баланса",-1))]),(0,l.Lk)("div",ht,[e[7]||(e[7]=(0,l.Lk)("label",{for:"amount"},"Сумма пополнения (₽)",-1)),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":e[0]||(e[0]=a=>t.value=a),type:"number",id:"amount",placeholder:"Введите сумму",min:"10"},null,512),[[s.Jo,t.value,void 0,{number:!0}]]),(0,l.Lk)("div",mt,[(0,l.Lk)("label",null,[(0,l.bo)((0,l.Lk)("input",{type:"radio","onUpdate:modelValue":e[1]||(e[1]=a=>n.value=a),value:"ton"},null,512),[[s.XL,n.value]]),e[5]||(e[5]=(0,l.eW)(" Оплата через TON "))]),(0,l.Lk)("label",null,[(0,l.bo)((0,l.Lk)("input",{type:"radio","onUpdate:modelValue":e[2]||(e[2]=a=>n.value=a),value:"sbp"},null,512),[[s.XL,n.value]]),e[6]||(e[6]=(0,l.eW)(" Оплата через СБП "))])]),(0,l.Lk)("button",{class:"top-up-btn",onClick:c},"Пополнить")])])}}},_t=t(1241);const bt=(0,_t.A)(Lt,[["__scopeId","data-v-959626e0"]]);var gt=bt;const ft=[{path:"/",component:j},{path:"/balance",component:W},{path:"/mychannels",component:sa},{path:"/adcatalog",component:ga},{path:"/catalog",component:Sa},{path:"/myad/:id",component:Ya,props:!0},{path:"/profile",component:De},{path:"/channel/:id",component:Ye,props:!0},{path:"/mychannel/:id",component:vt,props:!0},{path:"/topup",component:gt}];var yt=(0,v.aE)({history:(0,v.Bt)(),routes:ft});const wt=(0,s.Ef)(d);wt.use((0,n.Ey)()),wt.use(yt),wt.mount("#app")}},e={};function t(s){var n=e[s];if(void 0!==n)return n.exports;var l=e[s]={exports:{}};return a[s].call(l.exports,l,l.exports,t),l.exports}t.m=a,function(){var a=[];t.O=function(e,s,n,l){if(!s){var c=1/0;for(u=0;u<a.length;u++){s=a[u][0],n=a[u][1],l=a[u][2];for(var i=!0,o=0;o<s.length;o++)(!1&l||c>=l)&&Object.keys(t.O).every((function(a){return t.O[a](s[o])}))?s.splice(o--,1):(i=!1,l<c&&(c=l));if(i){a.splice(u--,1);var r=n();void 0!==r&&(e=r)}}return e}l=l||0;for(var u=a.length;u>0&&a[u-1][2]>l;u--)a[u]=a[u-1];a[u]=[s,n,l]}}(),function(){t.n=function(a){var e=a&&a.__esModule?function(){return a["default"]}:function(){return a};return t.d(e,{a:e}),e}}(),function(){t.d=function(a,e){for(var s in e)t.o(e,s)&&!t.o(a,s)&&Object.defineProperty(a,s,{enumerable:!0,get:e[s]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(a){if("object"===typeof window)return window}}()}(),function(){t.o=function(a,e){return Object.prototype.hasOwnProperty.call(a,e)}}(),function(){var a={524:0};t.O.j=function(e){return 0===a[e]};var e=function(e,s){var n,l,c=s[0],i=s[1],o=s[2],r=0;if(c.some((function(e){return 0!==a[e]}))){for(n in i)t.o(i,n)&&(t.m[n]=i[n]);if(o)var u=o(t)}for(e&&e(s);r<c.length;r++)l=c[r],t.o(a,l)&&a[l]&&a[l][0](),a[l]=0;return t.O(u)},s=self["webpackChunkmolnyads"]=self["webpackChunkmolnyads"]||[];s.forEach(e.bind(null,0)),s.push=e.bind(null,s.push.bind(s))}();var s=t.O(void 0,[504],(function(){return t(1825)}));s=t.O(s)})();
//# sourceMappingURL=app.6627d3e9.js.map