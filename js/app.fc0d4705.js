(function(){"use strict";var a={6069:function(a,t,s){var e=s(5130),n=s(2261),l=s(6768),c=s(7661);const i=(0,n.nY)("app",{state:()=>({tgInitData:null,tgInitDataRow:null,apiBaseUrl:"https://molnyads.tech",balance:0}),actions:{async initTelegram(){if(!this.tgInitData){const t=window.Telegram?.WebApp;t&&(t.ready(),t.expand());try{const a=await(0,c.aO)(),t=await(0,c.t1)();this.tgInitData=a,this.tgInitDataRow=t,console.log("Telegram launch params:",this.tgInitData),console.log("Telegram raw initData:",this.tgInitDataRow),await this.fetchBalance()}catch(a){console.error("Cannot retrieve Telegram launch params:",a)}}},async fetchBalance(){const a={"Content-Type":"application/json",Authorization:"Telegram-Init-Data "+this.tgInitDataRow};try{const t=await fetch(`${this.apiBaseUrl}/api/my/balance`,{headers:a,mode:"cors"});if(!t.ok)throw new Error(`Status ${t.status}`);const s=await t.json();this.balance=s.balance}catch(t){console.error("Error fetching balance:",t)}}}}),o={id:"app"};var r={__name:"App",setup(a){const t=i();return(0,l.sV)((()=>{t.initTelegram()})),(a,t)=>{const s=(0,l.g2)("router-view");return(0,l.uX)(),(0,l.CE)("div",o,[(0,l.bF)(s)])}}};const u=r;var d=u,v=s(1387),p=s(144),k=s(4232);const h={class:"container"},L={class:"header"},m={class:"profile-icon"},_=["src","alt"],b={key:1},f={class:"balance-section"},g={class:"balance-info"},y={class:"balance-amount"},w={class:"menu-items"};var C={__name:"Home",setup(a){const t=i();return(0,l.sV)((()=>{fetch(`${t.apiBaseUrl}/api/user`,{headers:{Authorization:"Telegram-Init-Data "+t.tgInitDataRow},mode:"cors"}).then((a=>a.ok?a.json():Promise.reject())).then((a=>{})).catch((()=>{}))})),(a,s)=>{const e=(0,l.g2)("router-link");return(0,l.uX)(),(0,l.CE)("div",h,[(0,l.Lk)("div",L,[s[0]||(s[0]=(0,l.Lk)("div",{class:"logo"},[(0,l.Lk)("div",{class:"logo-icon"},"📢"),(0,l.Lk)("div",{class:"logo-text"},"Molny ADS")],-1)),(0,l.Lk)("div",m,[(0,p.R1)(t).tgInitData?.tgWebAppData?.user?.photo_url?((0,l.uX)(),(0,l.CE)("img",{key:0,src:(0,p.R1)(t).tgInitData.tgWebAppData.user.photo_url,alt:(0,p.R1)(t).tgInitData.tgWebAppData.user.first_name||"user"},null,8,_)):((0,l.uX)(),(0,l.CE)("span",b,"👤"))])]),(0,l.Lk)("div",null,[(0,l.Lk)("ul",null,[(0,l.Lk)("li",null,[(0,l.bF)(e,{to:"/"},{default:(0,l.k6)((()=>s[1]||(s[1]=[(0,l.eW)("Home")]))),_:1,__:[1]})]),(0,l.Lk)("li",null,[(0,l.bF)(e,{to:"/balance"},{default:(0,l.k6)((()=>s[2]||(s[2]=[(0,l.eW)("Balance")]))),_:1,__:[2]})]),(0,l.Lk)("li",null,[(0,l.bF)(e,{to:"/mychannels"},{default:(0,l.k6)((()=>s[3]||(s[3]=[(0,l.eW)("Mychannels")]))),_:1,__:[3]})]),(0,l.Lk)("li",null,[(0,l.bF)(e,{to:"/adcatalog"},{default:(0,l.k6)((()=>s[4]||(s[4]=[(0,l.eW)("Adcatalog")]))),_:1,__:[4]})]),(0,l.Lk)("li",null,[(0,l.bF)(e,{to:"/catalog"},{default:(0,l.k6)((()=>s[5]||(s[5]=[(0,l.eW)("Catalog")]))),_:1,__:[5]})]),(0,l.Lk)("li",null,[(0,l.bF)(e,{to:"/myad"},{default:(0,l.k6)((()=>s[6]||(s[6]=[(0,l.eW)("Myad")]))),_:1,__:[6]})]),(0,l.Lk)("li",null,[(0,l.bF)(e,{to:"/profile"},{default:(0,l.k6)((()=>s[7]||(s[7]=[(0,l.eW)("Profile")]))),_:1,__:[7]})]),(0,l.Lk)("li",null,[(0,l.bF)(e,{to:"/channel"},{default:(0,l.k6)((()=>s[8]||(s[8]=[(0,l.eW)("Channel")]))),_:1,__:[8]})]),(0,l.Lk)("li",null,[(0,l.bF)(e,{to:"/mychannel"},{default:(0,l.k6)((()=>s[9]||(s[9]=[(0,l.eW)("Mychannel")]))),_:1,__:[9]})]),(0,l.Lk)("li",null,[(0,l.bF)(e,{to:"/topup"},{default:(0,l.k6)((()=>s[10]||(s[10]=[(0,l.eW)("Topup")]))),_:1,__:[10]})])])]),(0,l.bF)(e,{to:"/balance"},{default:(0,l.k6)((()=>[(0,l.Lk)("div",f,[(0,l.Lk)("div",g,[s[11]||(s[11]=(0,l.Lk)("h3",null,"Мой баланс:",-1)),(0,l.Lk)("div",y,(0,k.v_)((0,p.R1)(t).balance)+"₽",1)]),(0,l.bF)(e,{to:"/topup"},{default:(0,l.k6)((()=>s[12]||(s[12]=[(0,l.Lk)("div",null,[(0,l.Lk)("button",{class:"top-up-btn"},"Пополнить")],-1)]))),_:1,__:[12]})])])),_:1}),(0,l.Lk)("div",w,[(0,l.bF)(e,{to:"/mychannels",class:"menu-item"},{default:(0,l.k6)((()=>s[13]||(s[13]=[(0,l.Lk)("div",{class:"menu-icon channels"},"📱",-1),(0,l.Lk)("div",{class:"menu-text"},"Мои каналы",-1),(0,l.Lk)("div",{class:"menu-arrow"},"›",-1)]))),_:1,__:[13]}),(0,l.bF)(e,{to:"/catalog",class:"menu-item"},{default:(0,l.k6)((()=>s[14]||(s[14]=[(0,l.Lk)("div",{class:"menu-icon ads"},"✈️",-1),(0,l.Lk)("div",{class:"menu-text"},"Купить рекламу",-1),(0,l.Lk)("div",{class:"menu-arrow"},"›",-1)]))),_:1,__:[14]}),(0,l.bF)(e,{to:"/adcatalog",class:"menu-item"},{default:(0,l.k6)((()=>s[15]||(s[15]=[(0,l.Lk)("div",{class:"menu-icon purchases"},"🛒",-1),(0,l.Lk)("div",{class:"menu-text"},"Мои покупки",-1),(0,l.Lk)("div",{class:"menu-arrow"},"›",-1)]))),_:1,__:[15]}),(0,l.bF)(e,{to:"/profile",class:"menu-item"},{default:(0,l.k6)((()=>s[16]||(s[16]=[(0,l.Lk)("div",{class:"menu-icon profile"},"👤",-1),(0,l.Lk)("div",{class:"menu-text"},"Профиль",-1),(0,l.Lk)("div",{class:"menu-arrow"},"›",-1)]))),_:1,__:[16]})]),s[17]||(s[17]=(0,l.Lk)("div",{class:"notifications"},[(0,l.Lk)("div",{class:"notifications-text"},[(0,l.eW)(" Новые заявки: "),(0,l.Lk)("span",{class:"notifications-count"},"2")])],-1))])}}};const E=C;var j=E;const R={class:"container"},F={class:"balance-page-header"},I={class:"balance-card"},D={class:"balance-info-main"},K={class:"balance-amount-main"},T={class:"history-section"},X={class:"transaction-list"},U={class:"transaction-details"},W={class:"transaction-title"},B={class:"transaction-date"};var $={__name:"Balance",setup(a){const t=i(),s=(0,p.KR)([]);function e(a){const t=new Date(a);return t.toLocaleString("ru-RU",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})}function n(a){return Math.abs(a).toLocaleString("ru-RU")}return(0,l.sV)((async()=>{await t.initTelegram();try{const a=await fetch(`${t.apiBaseUrl}/api/my/transactions?limit=30`,{headers:{Authorization:"Telegram-Init-Data "+t.tgInitDataRow},mode:"cors"});s.value=await a.json()}catch(a){console.error("Ошибка получения транзакций:",a)}})),(a,c)=>{const i=(0,l.g2)("router-link");return(0,l.uX)(),(0,l.CE)("div",R,[(0,l.bF)(i,{to:"/",class:"back-btn"},{default:(0,l.k6)((()=>c[0]||(c[0]=[(0,l.eW)("←")]))),_:1,__:[0]}),(0,l.Lk)("div",F,[c[3]||(c[3]=(0,l.Lk)("div",{class:"balance-page-title"},"Баланс",-1)),(0,l.Lk)("div",I,[(0,l.Lk)("div",D,[c[1]||(c[1]=(0,l.Lk)("div",{class:"balance-label"},"Ваш баланс",-1)),(0,l.Lk)("div",K,(0,k.v_)((0,p.R1)(t).balance)+" ₽",1)]),c[2]||(c[2]=(0,l.Lk)("button",{class:"withdraw-btn"},"Вывести",-1))])]),(0,l.Lk)("div",T,[c[4]||(c[4]=(0,l.Lk)("div",{class:"history-title"},"История операций",-1)),(0,l.Lk)("div",X,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(s.value,(a=>((0,l.uX)(),(0,l.CE)("div",{class:"transaction-item",key:a.id},[(0,l.Lk)("div",{class:(0,k.C4)(["transaction-icon",a.amount>=0?"income":"expense"])},(0,k.v_)(a.amount>=0?"+":"−"),3),(0,l.Lk)("div",U,[(0,l.Lk)("div",W,(0,k.v_)(a.amount>=0?"Пополнение":"Списание"),1),(0,l.Lk)("div",B,(0,k.v_)(e(a.created_at)),1)]),(0,l.Lk)("div",{class:(0,k.C4)(["transaction-amount",a.amount>=0?"income":"expense"])},(0,k.v_)(n(a.amount))+" ₽ ",3)])))),128))])])])}}};const x=$;var A=x;s(8111),s(7588);const O={class:"container"},V={class:"catalog-header"},S={class:"search-filters"},P={class:"search-bar"},M={class:"filter-row"},N=["value"],z={class:"channels-grid"},J={class:"channel-card"},H={class:"channel-name"},q={class:"channel-category"},G={class:"channel-sales"},Y={class:"pagination"},Q=["onClick"],Z=10;var aa={__name:"Mychannels",setup(a){const t=i(),s=(0,p.KR)([]),n=(0,p.KR)([]),c=(0,p.KR)(""),o=(0,p.KR)("desc"),r=(0,p.KR)(1),u=(0,p.KR)(1),d=(0,p.KR)([]),v=()=>({Authorization:"Telegram-Init-Data "+t.tgInitDataRow});async function h(){const a=await fetch(`${t.apiBaseUrl}/api/tables/subjects`,{headers:v(),mode:"cors",credentials:"include"});s.value=await a.json()}async function L(){const a=new URLSearchParams;c.value&&a.append("search",c.value),n.value.forEach((t=>a.append("subject_ids",t)));const s=await fetch(`${t.apiBaseUrl}/api/my/groups/count?${a.toString()}`,{headers:v(),mode:"cors",credentials:"include"}),e=await s.json();u.value=Math.ceil(e.count/Z)||1}async function m(){const a=new URLSearchParams({page:r.value,limit:Z,sort_by_sales:o.value});c.value&&a.append("search",c.value),n.value.forEach((t=>a.append("subject_ids",t)));const s=await fetch(`${t.apiBaseUrl}/api/my/groups?${a.toString()}`,{headers:v(),mode:"cors",credentials:"include"});d.value=await s.json()}return(0,l.sV)((async()=>{await t.initTelegram(),await h(),await L(),await m()})),(0,l.wB)([c,n,o],(async()=>{r.value=1,await L(),await m()})),(0,l.wB)(r,(()=>m())),(a,t)=>{const i=(0,l.g2)("router-link");return(0,l.uX)(),(0,l.CE)("div",O,[(0,l.bF)(i,{to:"/",class:"back-btn"},{default:(0,l.k6)((()=>t[3]||(t[3]=[(0,l.eW)("←")]))),_:1,__:[3]}),(0,l.Lk)("div",V,[t[7]||(t[7]=(0,l.Lk)("h1",{class:"catalog-title"},"Мои каналы",-1)),(0,l.Lk)("div",S,[(0,l.Lk)("div",P,[t[4]||(t[4]=(0,l.Lk)("span",{class:"search-icon"},"🔍",-1)),(0,l.bo)((0,l.Lk)("input",{type:"text",class:"search-input",placeholder:"Поиск по названию","onUpdate:modelValue":t[0]||(t[0]=a=>c.value=a)},null,512),[[e.Jo,c.value]])]),(0,l.Lk)("div",M,[(0,l.bo)((0,l.Lk)("select",{class:"filter-select","onUpdate:modelValue":t[1]||(t[1]=a=>n.value=a)},[t[5]||(t[5]=(0,l.Lk)("option",{value:"default"},"Все",-1)),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(s.value,(a=>((0,l.uX)(),(0,l.CE)("option",{key:a.id,value:a.id},(0,k.v_)(a.name),9,N)))),128))],512),[[e.u1,n.value]]),(0,l.bo)((0,l.Lk)("select",{class:"filter-select","onUpdate:modelValue":t[2]||(t[2]=a=>o.value=a)},t[6]||(t[6]=[(0,l.Lk)("option",{value:"desc"},"По количеству продаж (по убыванию)",-1),(0,l.Lk)("option",{value:"asc"},"По количеству продаж (по возрастанию)",-1)]),512),[[e.u1,o.value]])])])]),(0,l.Lk)("div",z,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(d.value,(a=>((0,l.uX)(),(0,l.Wv)(i,{to:"/mychannel",key:a.id},{default:(0,l.k6)((()=>[(0,l.Lk)("div",J,[t[8]||(t[8]=(0,l.Lk)("div",{class:"channel-card-icon business"},"💼",-1)),(0,l.Lk)("div",H,(0,k.v_)(a.username),1),(0,l.Lk)("div",q,(0,k.v_)(a.subject_ids.join(", ")),1),(0,l.Lk)("div",G,(0,k.v_)(a.sales_count)+" продаж",1)])])),_:2},1024)))),128))]),(0,l.Lk)("div",Y,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(u.value,(a=>((0,l.uX)(),(0,l.CE)("button",{class:(0,k.C4)(["page-btn",{active:r.value===a}]),key:a,onClick:t=>r.value=a},(0,k.v_)(a),11,Q)))),128))])])}}};const ta=aa;var sa=ta;const ea={class:"container"},na={class:"ads-grid"},la={class:"ad-card"},ca={class:"ad-type"},ia={class:"ad-info"},oa={class:"ad-date"},ra={class:"ad-price"};function ua(a,t,s,e,n,c){const i=(0,l.g2)("router-link");return(0,l.uX)(),(0,l.CE)("div",ea,[(0,l.bF)(i,{to:"/",class:"back-btn"},{default:(0,l.k6)((()=>t[0]||(t[0]=[(0,l.eW)("←")]))),_:1,__:[0]}),t[3]||(t[3]=(0,l.Fv)('<div class="catalog-header"><h1 class="catalog-title">Каталог реклам</h1><div class="search-filters"><div class="filter-dropdown"><select class="filter-btn"><option>Сначала новые</option><option>Сначала старые</option></select><select class="filter-btn"><option>Все статусы</option><option>Опубликовано</option><option>Ожидает</option><option>Отменено</option></select></div></div></div>',1)),(0,l.Lk)("div",na,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(n.ads,((a,s)=>((0,l.uX)(),(0,l.Wv)(i,{to:"/myad",key:s},{default:(0,l.k6)((()=>[(0,l.Lk)("div",la,[(0,l.Lk)("div",ca,(0,k.v_)(a.slot),1),t[2]||(t[2]=(0,l.Lk)("div",{class:"ad-icon"},"📢",-1)),(0,l.Lk)("div",ia,[t[1]||(t[1]=(0,l.Lk)("div",{class:"ad-title"},"Название канала",-1)),(0,l.Lk)("div",oa,(0,k.v_)(a.date),1)]),(0,l.Lk)("div",ra,(0,k.v_)(a.price)+" ₽",1),(0,l.Lk)("div",{class:(0,k.C4)(["ad-status",a.statusClass])},(0,k.v_)(a.status),3)])])),_:2},1024)))),128))]),t[4]||(t[4]=(0,l.Fv)('<div class="pagination"><button class="page-btn active">1</button><button class="page-btn">2</button><button class="page-btn">3</button><button class="page-btn">...</button><button class="page-btn">10</button></div>',1))])}var da={name:"AdCatalog",data(){return{ads:[{slot:"1/24",date:"24 апреля 2024",price:1500,status:"Опубликовано",statusClass:"published"},{slot:"1/24",date:"22 апреля 2024",price:1800,status:"Ожидает",statusClass:"waiting"},{slot:"1/24",date:"20 апреля 2024",price:1200,status:"Запланировано",statusClass:"scheduled"},{slot:"1/24",date:"18 апреля 2024",price:1500,status:"Отменено",statusClass:"cancelled"},{slot:"1/24",date:"16 апреля 2024",price:2100,status:"Опубликовано",statusClass:"published"},{slot:"1/48",date:"15 апреля 2024",price:3200,status:"Ожидает",statusClass:"waiting"}]}}},va=s(1241);const pa=(0,va.A)(da,[["render",ua]]);var ka=pa;const ha={class:"container"},La={class:"catalog-header"},ma={class:"search-filters"},_a={class:"search-bar"},ba={class:"filter-row"},fa=["value"],ga={class:"channels-grid"},ya={class:"channel-card"},wa={class:"channel-name"},Ca={class:"channel-category"},Ea={class:"channel-price"},ja={class:"pagination"},Ra=["onClick"],Fa=10;var Ia={__name:"Catalog",setup(a){const t=i(),s=(0,p.KR)([]),n=(0,p.KR)(""),c=(0,p.KR)(""),o=(0,p.KR)("price_desc"),r=(0,p.KR)(1),u=(0,p.KR)(1),d=(0,p.KR)([]),v=()=>({Authorization:"Telegram-Init-Data "+t.tgInitDataRaw});async function h(){const a=await fetch(`${t.apiBaseUrl}/api/tables/subjects`,{headers:v(),mode:"cors",credentials:"include"});s.value=await a.json()}async function L(){const a=new URLSearchParams({search:c.value});n.value&&a.append("subject_ids",n.value);const s=await fetch(`${t.apiBaseUrl}/api/catalog/count?${a.toString()}`,{headers:v(),mode:"cors",credentials:"include"}),e=await s.json();u.value=Math.ceil(e.count/Fa)||1}async function m(){const a=new URLSearchParams({page:r.value,limit:Fa,search:c.value,sort_by:o.value});n.value&&a.append("subject_ids",n.value);const s=await fetch(`${t.apiBaseUrl}/api/catalog?${a.toString()}`,{headers:v(),mode:"cors",credentials:"include"});d.value=await s.json()}return(0,l.sV)((async()=>{await t.initTelegram(),await h(),await L(),await m()})),(0,l.wB)([c,n,o],(async()=>{r.value=1,await L(),await m()})),(0,l.wB)(r,m),(a,t)=>{const i=(0,l.g2)("router-link");return(0,l.uX)(),(0,l.CE)("div",ha,[(0,l.bF)(i,{to:"/",class:"back-btn"},{default:(0,l.k6)((()=>t[3]||(t[3]=[(0,l.eW)("←")]))),_:1,__:[3]}),(0,l.Lk)("div",La,[t[7]||(t[7]=(0,l.Lk)("h1",{class:"catalog-title"},"Каталог",-1)),(0,l.Lk)("div",ma,[(0,l.Lk)("div",_a,[t[4]||(t[4]=(0,l.Lk)("span",{class:"search-icon"},"🔍",-1)),(0,l.bo)((0,l.Lk)("input",{type:"text",class:"search-input",placeholder:"Поиск по названию","onUpdate:modelValue":t[0]||(t[0]=a=>c.value=a)},null,512),[[e.Jo,c.value]])]),(0,l.Lk)("div",ba,[(0,l.bo)((0,l.Lk)("select",{class:"filter-select","onUpdate:modelValue":t[1]||(t[1]=a=>n.value=a)},[t[5]||(t[5]=(0,l.Lk)("option",{value:""},"Все тематики",-1)),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(s.value,(a=>((0,l.uX)(),(0,l.CE)("option",{key:a.id,value:a.id},(0,k.v_)(a.name),9,fa)))),128))],512),[[e.u1,n.value]]),(0,l.bo)((0,l.Lk)("select",{class:"filter-select","onUpdate:modelValue":t[2]||(t[2]=a=>o.value=a)},t[6]||(t[6]=[(0,l.Lk)("option",{value:"price_desc"},"По цене (убыванию)",-1),(0,l.Lk)("option",{value:"price_asc"},"По цене (возрастанию)",-1),(0,l.Lk)("option",{value:"subs_desc"},"По подписчикам (убыванию)",-1),(0,l.Lk)("option",{value:"subs_asc"},"По подписчикам (возрастанию)",-1)]),512),[[e.u1,o.value]])])])]),(0,l.Lk)("div",ga,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(d.value,(a=>((0,l.uX)(),(0,l.Wv)(i,{key:a.id,to:`/channel/${a.id}`},{default:(0,l.k6)((()=>[(0,l.Lk)("div",ya,[t[8]||(t[8]=(0,l.Lk)("div",{class:"channel-card-icon business"},"💼",-1)),(0,l.Lk)("div",wa,(0,k.v_)(a.username),1),(0,l.Lk)("div",Ca,(0,k.v_)(a.subject_ids.join(", ")),1),(0,l.Lk)("div",Ea,"от "+(0,k.v_)(a.price)+" ₽",1)])])),_:2},1032,["to"])))),128))]),(0,l.Lk)("div",ja,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(u.value,(a=>((0,l.uX)(),(0,l.CE)("button",{class:(0,k.C4)(["page-btn",{active:r.value===a}]),key:a,onClick:t=>r.value=a},(0,k.v_)(a),11,Ra)))),128))])])}}};const Da=Ia;var Ka=Da;const Ta={class:"container"};function Xa(a,t,s,e,n,c){const i=(0,l.g2)("router-link");return(0,l.uX)(),(0,l.CE)("div",Ta,[(0,l.bF)(i,{to:"/adcatalog",class:"back-btn"},{default:(0,l.k6)((()=>t[0]||(t[0]=[(0,l.eW)("←")]))),_:1,__:[0]}),t[1]||(t[1]=(0,l.Fv)('<div class="purchase-header"><div class="purchase-title">Детали покупки</div><div class="purchase-card"><div class="purchase-card-header"><div class="purchase-channel-icon">📢</div><div class="purchase-channel-info"><div class="purchase-channel-name">Название канала</div><div class="purchase-slot-info">1/24</div></div><div class="purchase-price">3 500 ₽</div></div><div class="purchase-details"><div class="purchase-detail-row"><div class="purchase-detail-label">Дата покупки:</div><div class="purchase-detail-value"><span class="status-badge">Ожидает публикации</span></div></div><div class="purchase-detail-row"><div class="purchase-detail-label">Плановая дата:</div><div class="purchase-detail-value">12 июня 2025</div></div></div></div></div><div class="purchase-actions"><button class="purchase-action-btn secondary">Посмотреть пост</button><button class="purchase-action-btn primary">Контакт с поддержкой</button></div>',2))])}var Ua={name:"MyAd"};const Wa=(0,va.A)(Ua,[["render",Xa]]);var Ba=Wa;const $a={class:"container"},xa={class:"stats-container"},Aa={class:"stats-block"},Oa={class:"stats-data"},Va={class:"stat-item"},Sa={class:"stat-value"},Pa={class:"stat-item"},Ma={class:"stat-value"},Na={class:"stat-item"},za={class:"stat-value"},Ja={class:"stat-item"},Ha={class:"stat-value"},qa={class:"stat-item"},Ga={class:"stat-value"},Ya={class:"stats-block"},Qa={class:"stats-data"},Za={class:"stat-label"},at={class:"stat-value"},tt={class:"stats-block"},st={class:"stats-data"},et={class:"stat-item"},nt={class:"stat-value"},lt={class:"stat-item"},ct={class:"stat-value"},it={class:"stats-block"},ot={class:"stats-data"},rt={class:"stat-item"},ut={class:"stat-value"},dt={class:"stat-item"},vt={class:"stat-value"};var pt={__name:"Profile",setup(a){i();const t=(0,p.Kh)({total_ads:0,bought_ads:0,active_orders:0,cancelled_orders:0,average_price:0,ad_type_purchases:{},total_sales:0,total_revenue:0,sales_last_30_days:0,revenue_last_30_days:0});return(0,l.sV)((async()=>{const a=i(),s={Authorization:"Telegram-Init-Data "+a.tgInitDataRow};try{const e=await fetch(`${a.apiBaseUrl}/api/my/stats`,{headers:s,mode:"cors"}),n=await e.json();Object.assign(t,n);const l=await fetch(`${a.apiBaseUrl}/api/tables/ad_types`,{headers:s,mode:"cors"}),c=await l.json(),i={};c.forEach((a=>{i[a.id]=t.ad_type_purchases[a.id]||0})),t.ad_type_purchases=i}catch(e){console.error("Ошибка при загрузке статистики профиля:",e)}})),(a,s)=>{const e=(0,l.g2)("router-link");return(0,l.uX)(),(0,l.CE)("div",$a,[(0,l.bF)(e,{to:"/",class:"back-btn"},{default:(0,l.k6)((()=>s[0]||(s[0]=[(0,l.eW)("←")]))),_:1,__:[0]}),s[14]||(s[14]=(0,l.Lk)("div",{class:"catalog-header"},[(0,l.Lk)("h1",{class:"catalog-title"},"Профиль")],-1)),(0,l.Lk)("div",xa,[(0,l.Lk)("div",Aa,[s[6]||(s[6]=(0,l.Lk)("div",{class:"stats-block-title"},"Общая активность",-1)),(0,l.Lk)("div",Oa,[(0,l.Lk)("div",Va,[s[1]||(s[1]=(0,l.Lk)("span",{class:"stat-label"},"Всего объявлений:",-1)),(0,l.Lk)("span",Sa,(0,k.v_)(t.total_ads),1)]),(0,l.Lk)("div",Pa,[s[2]||(s[2]=(0,l.Lk)("span",{class:"stat-label"},"Куплено объявлений:",-1)),(0,l.Lk)("span",Ma,(0,k.v_)(t.bought_ads),1)]),(0,l.Lk)("div",Na,[s[3]||(s[3]=(0,l.Lk)("span",{class:"stat-label"},"Активные заказы:",-1)),(0,l.Lk)("span",za,(0,k.v_)(t.active_orders),1)]),(0,l.Lk)("div",Ja,[s[4]||(s[4]=(0,l.Lk)("span",{class:"stat-label"},"Отменённые заказы:",-1)),(0,l.Lk)("span",Ha,(0,k.v_)(t.cancelled_orders),1)]),(0,l.Lk)("div",qa,[s[5]||(s[5]=(0,l.Lk)("span",{class:"stat-label"},"Средняя цена размещения:",-1)),(0,l.Lk)("span",Ga,(0,k.v_)(t.average_price)+" ₽",1)])])]),(0,l.Lk)("div",Ya,[s[7]||(s[7]=(0,l.Lk)("div",{class:"stats-block-title"},"Покупка рекламы по типам",-1)),(0,l.Lk)("div",Qa,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(t.ad_type_purchases,((a,t)=>((0,l.uX)(),(0,l.CE)("div",{key:t,class:"stat-item"},[(0,l.Lk)("span",Za,"Тип "+(0,k.v_)(t)+":",1),(0,l.Lk)("span",at,(0,k.v_)(a),1)])))),128))])]),(0,l.Lk)("div",tt,[s[10]||(s[10]=(0,l.Lk)("div",{class:"stats-block-title"},"Продажи",-1)),(0,l.Lk)("div",st,[(0,l.Lk)("div",et,[s[8]||(s[8]=(0,l.Lk)("span",{class:"stat-label"},"Всего продаж:",-1)),(0,l.Lk)("span",nt,(0,k.v_)(t.total_sales),1)]),(0,l.Lk)("div",lt,[s[9]||(s[9]=(0,l.Lk)("span",{class:"stat-label"},"Выручка всего:",-1)),(0,l.Lk)("span",ct,(0,k.v_)(t.total_revenue)+" ₽",1)])])]),(0,l.Lk)("div",it,[s[13]||(s[13]=(0,l.Lk)("div",{class:"stats-block-title"},"За последние 30 дней",-1)),(0,l.Lk)("div",ot,[(0,l.Lk)("div",rt,[s[11]||(s[11]=(0,l.Lk)("span",{class:"stat-label"},"Продаж:",-1)),(0,l.Lk)("span",ut,(0,k.v_)(t.sales_last_30_days),1)]),(0,l.Lk)("div",dt,[s[12]||(s[12]=(0,l.Lk)("span",{class:"stat-label"},"Выручка:",-1)),(0,l.Lk)("span",vt,(0,k.v_)(t.revenue_last_30_days)+" ₽",1)])])])])])}}};const kt=pt;var ht=kt;s(116),s(1701);const Lt={class:"container"},mt={class:"channel-header"},_t={class:"channel-title"},bt={class:"channel-info"},ft={class:"info-row"},gt={class:"info-row"},yt={class:"channel-visual"},wt={class:"channel-links"},Ct={class:"link-item"},Et={class:"link-text"},jt=["href"],Rt={class:"link-item"},Ft={class:"link-text"},It=["href"],Dt={class:"pricing-section"},Kt={class:"pricing-items"},Tt={class:"pricing-label"},Xt={class:"pricing-value"};var Ut={__name:"Channel",setup(a){const t=i(),s=(0,v.lq)(),e=Number(s.params.id),n=(0,p.Kh)({username:"",subject_ids:[],country:"",language:"",link:"",ad_prices:{}}),c=(0,p.KR)([]),o=["Пост","Закреплённый пост","Упоминание"],r=()=>({Authorization:"Telegram-Init-Data "+t.tgInitDataRaw,"Content-Type":"application/json"});async function u(){const a=await fetch(`${t.apiBaseUrl}/api/tables/subjects`,{headers:r(),mode:"cors",credentials:"include"});c.value=await a.json()}async function d(){const a=await fetch(`${t.apiBaseUrl}/api/group/${e}`,{headers:r(),mode:"cors",credentials:"include"}),s=await a.json();Object.assign(n,s)}const h=(0,l.EW)((()=>n.subject_ids.map((a=>c.value.find((t=>t.id===a))?.name||a)).join(" / "))),L=(0,l.EW)((()=>`https://tgstat.com/channel/@${n.username}`));function m(a){const t=Object.keys(n.ad_prices)[a];return n.ad_prices[t]||0}return(0,l.sV)((async()=>{await t.initTelegram(),await u(),await d()})),(a,t)=>{const s=(0,l.g2)("router-link");return(0,l.uX)(),(0,l.CE)("div",Lt,[(0,l.bF)(s,{to:"/adcatalog",class:"back-btn"},{default:(0,l.k6)((()=>t[0]||(t[0]=[(0,l.eW)("←")]))),_:1,__:[0]}),(0,l.Lk)("div",mt,[(0,l.Lk)("h1",_t,(0,k.v_)(n.username),1),(0,l.Lk)("div",bt,[(0,l.Lk)("div",ft,[t[2]||(t[2]=(0,l.Lk)("span",{class:"info-icon"},"📁",-1)),(0,l.Lk)("span",null,[t[1]||(t[1]=(0,l.eW)(" Тематика: ")),(0,l.Lk)("strong",null,(0,k.v_)(h.value),1)])]),(0,l.Lk)("div",gt,[t[4]||(t[4]=(0,l.Lk)("span",{class:"info-icon"},"🌍",-1)),(0,l.Lk)("span",null,[t[3]||(t[3]=(0,l.eW)(" Гео / Язык: ")),(0,l.Lk)("strong",null,(0,k.v_)(n.country)+" / "+(0,k.v_)(n.language),1)])])])]),(0,l.Lk)("div",yt,[t[11]||(t[11]=(0,l.Lk)("div",{class:"channel-logo"},[(0,l.Lk)("div",{class:"megaphone-icon"},"📢")],-1)),(0,l.Lk)("div",wt,[(0,l.Lk)("div",Ct,[t[7]||(t[7]=(0,l.Lk)("div",{class:"link-icon telegram-icon"},"✈",-1)),(0,l.Lk)("div",Et,[t[5]||(t[5]=(0,l.Lk)("strong",null,"t.me:",-1)),t[6]||(t[6]=(0,l.Lk)("br",null,null,-1)),(0,l.Lk)("a",{href:n.link,class:"link-url"},(0,k.v_)(n.link),9,jt)])]),(0,l.Lk)("div",Rt,[t[10]||(t[10]=(0,l.Lk)("div",{class:"link-icon tgstat-icon"},"📊",-1)),(0,l.Lk)("div",Ft,[t[8]||(t[8]=(0,l.Lk)("strong",null,"TGStat:",-1)),t[9]||(t[9]=(0,l.Lk)("br",null,null,-1)),(0,l.Lk)("a",{href:L.value,class:"link-url"},(0,k.v_)(L.value),9,It)])])])]),(0,l.Lk)("div",Dt,[t[12]||(t[12]=(0,l.Lk)("h2",{class:"pricing-title"},"Реклама:",-1)),(0,l.Lk)("div",Kt,[((0,l.uX)(),(0,l.CE)(l.FK,null,(0,l.pI)(o,((a,t)=>(0,l.Lk)("div",{key:t,class:"pricing-item"},[(0,l.Lk)("span",Tt,(0,k.v_)(a)+":",1),(0,l.Lk)("span",Xt,(0,k.v_)(m(t))+" ₽",1)]))),64))])])])}}};const Wt=Ut;var Bt=Wt;s(4114);const $t={class:"container"},xt={class:"channel-header"},At={class:"channel-title"},Ot={class:"channel-info-grid"},Vt={class:"info-card"},St={class:"info-number"},Pt={class:"info-card"},Mt={class:"info-number"},Nt={class:"channel-actions"},zt={class:"schedule-section"},Jt={class:"schedule-grid",ref:"grid"};var Ht={__name:"Mychannel",setup(a){const t=i(),s=(0,v.lq)(),e=Number(s.params.id),n=(0,p.Kh)({username:"",subject_ids:[],country:"",language:"",link:"",is_owner:!1,ad_prices:{},all_slots:{},busy_slots:{}}),c=(0,p.KR)(0),o=(0,p.KR)(0),r=()=>({"Content-Type":"application/json",Authorization:"Telegram-Init-Data "+t.tgInitDataRaw});function u(){const a=m.value;a.innerHTML="";const t=Object.keys(n.all_slots),s=Array.from({length:24},((a,t)=>t)),e=document.createElement("div");e.className="schedule-time-header",a.appendChild(e),t.forEach((t=>{const s=document.createElement("div");s.className="schedule-day-header",s.textContent=t,a.appendChild(s)})),s.forEach((s=>{const e=document.createElement("div");e.className="schedule-time-label",e.textContent=s,a.appendChild(e),t.forEach((t=>{const e=document.createElement("div");e.className="schedule-cell",e.dataset.day=t,e.dataset.hour=s,n.busy_slots[t]?.includes(s)&&e.classList.add("active"),e.addEventListener("click",(()=>e.classList.toggle("active"))),a.appendChild(e)}))}))}async function d(){const a=m.value.children,s={};for(const t of a){if(!t.dataset.day)continue;const{day:a,hour:e}=t.dataset;t.classList.contains("active")&&(s[a]=s[a]||[],s[a].push(Number(e)))}try{await fetch(`${t.apiBaseUrl}/api/group/${e}/schedule`,{method:"PUT",headers:r(),body:JSON.stringify({schedule:s}),mode:"cors"}),alert("Расписание сохранено")}catch(n){console.error("Ошибка сохранения расписания:",n)}}function h(){console.log("Edit group",e)}function L(){n.is_owner=!n.is_owner}const m=(0,p.KR)(null);return(0,l.sV)((async()=>{await t.initTelegram();try{const a=await fetch(`${t.apiBaseUrl}/api/group/${e}`,{headers:r(),mode:"cors"}),s=await a.json();Object.assign(n,s),c.value=n.all_slots?.additionalProp1?.length||0,o.value=n.all_slots?.additionalProp2?.length||0,u()}catch(a){console.error("Ошибка загрузки группы:",a)}})),(a,t)=>{const s=(0,l.g2)("router-link");return(0,l.uX)(),(0,l.CE)("div",$t,[(0,l.bF)(s,{to:"/mychannels",class:"back-btn"},{default:(0,l.k6)((()=>t[0]||(t[0]=[(0,l.eW)("←")]))),_:1,__:[0]}),(0,l.Lk)("div",xt,[(0,l.Lk)("h1",At,(0,k.v_)(n.username),1),(0,l.Lk)("div",Ot,[(0,l.Lk)("div",Vt,[(0,l.Lk)("div",St,(0,k.v_)(c.value),1),t[1]||(t[1]=(0,l.Lk)("div",{class:"info-label"},"Подписчики",-1))]),(0,l.Lk)("div",Pt,[(0,l.Lk)("div",Mt,(0,k.v_)(o.value),1),t[2]||(t[2]=(0,l.Lk)("div",{class:"info-label"},"Просмотры",-1))])]),(0,l.Lk)("div",Nt,[(0,l.Lk)("button",{class:"action-btn secondary",onClick:h},"Изменить"),(0,l.Lk)("button",{class:"action-btn primary",onClick:L},(0,k.v_)(n.is_owner?"Отключить канал":"Включить канал"),1)])]),(0,l.Lk)("div",zt,[t[3]||(t[3]=(0,l.Lk)("div",{class:"schedule-title"},"Расписание публикаций",-1)),(0,l.Lk)("div",Jt,null,512),(0,l.Lk)("button",{class:"action-btn primary",onClick:d,style:{"margin-top":"16px"}}," Сохранить расписание ")])])}}};const qt=Ht;var Gt=qt;const Yt={class:"container"},Qt={class:"topup-header"},Zt={class:"form-section"},as={class:"payment-methods"};var ts={__name:"Topup",async setup(a){let t,s;const n=i();[t,s]=(0,l.E)((()=>n.initTelegram())),await t,s();const c=(0,p.KR)(null),o=(0,p.KR)("ton");async function r(){if(!c.value||c.value<10)alert("Пожалуйста, укажите сумму не менее 10 ₽");else if(o.value)try{const a={Authorization:"Telegram-Init-Data "+n.tgInitDataRaw,"Content-Type":"application/json"},t=JSON.stringify({amount:c.value}),s=await fetch(`${n.apiBaseUrl}/api/my/balance/deposit`,{method:"POST",headers:a,body:t,mode:"cors"});if(!s.ok){const a=await s.text();throw new Error(a||"Ошибка пополнения")}alert("Баланс успешно пополнен на "+c.value+" ₽"),c.value=null}catch(a){console.error("Ошибка при пополнении баланса:",a),alert("Не удалось пополнить баланс: "+a.message)}else alert("Пожалуйста, выберите способ оплаты")}return(a,t)=>{const s=(0,l.g2)("router-link");return(0,l.uX)(),(0,l.CE)("div",Yt,[(0,l.Lk)("div",Qt,[(0,l.bF)(s,{to:"/",class:"back-button"},{default:(0,l.k6)((()=>t[3]||(t[3]=[(0,l.eW)("←")]))),_:1,__:[3]}),t[4]||(t[4]=(0,l.Lk)("h1",null,"Пополнение баланса",-1))]),(0,l.Lk)("div",Zt,[t[7]||(t[7]=(0,l.Lk)("label",{for:"amount"},"Сумма пополнения (₽)",-1)),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=a=>c.value=a),type:"number",id:"amount",placeholder:"Введите сумму",min:"10"},null,512),[[e.Jo,c.value,void 0,{number:!0}]]),(0,l.Lk)("div",as,[(0,l.Lk)("label",null,[(0,l.bo)((0,l.Lk)("input",{type:"radio","onUpdate:modelValue":t[1]||(t[1]=a=>o.value=a),value:"ton"},null,512),[[e.XL,o.value]]),t[5]||(t[5]=(0,l.eW)(" Оплата через TON "))]),(0,l.Lk)("label",null,[(0,l.bo)((0,l.Lk)("input",{type:"radio","onUpdate:modelValue":t[2]||(t[2]=a=>o.value=a),value:"sbp"},null,512),[[e.XL,o.value]]),t[6]||(t[6]=(0,l.eW)(" Оплата через СБП "))])]),(0,l.Lk)("button",{class:"top-up-btn",onClick:r},"Пополнить")])])}}};const ss=(0,va.A)(ts,[["__scopeId","data-v-1e822af0"]]);var es=ss;const ns=[{path:"/",component:j},{path:"/balance",component:A},{path:"/mychannels",component:sa},{path:"/adcatalog",component:ka},{path:"/catalog",component:Ka},{path:"/myad",component:Ba},{path:"/profile",component:ht},{path:"/channel/:id",component:Bt,props:!0},{path:"/mychannel/:id",component:Gt,props:!0},{path:"/topup",component:es}];var ls=(0,v.aE)({history:(0,v.Bt)(),routes:ns});const cs=(0,e.Ef)(d);cs.use((0,n.Ey)()),cs.use(ls),cs.mount("#app")}},t={};function s(e){var n=t[e];if(void 0!==n)return n.exports;var l=t[e]={exports:{}};return a[e].call(l.exports,l,l.exports,s),l.exports}s.m=a,function(){var a=[];s.O=function(t,e,n,l){if(!e){var c=1/0;for(u=0;u<a.length;u++){e=a[u][0],n=a[u][1],l=a[u][2];for(var i=!0,o=0;o<e.length;o++)(!1&l||c>=l)&&Object.keys(s.O).every((function(a){return s.O[a](e[o])}))?e.splice(o--,1):(i=!1,l<c&&(c=l));if(i){a.splice(u--,1);var r=n();void 0!==r&&(t=r)}}return t}l=l||0;for(var u=a.length;u>0&&a[u-1][2]>l;u--)a[u]=a[u-1];a[u]=[e,n,l]}}(),function(){s.n=function(a){var t=a&&a.__esModule?function(){return a["default"]}:function(){return a};return s.d(t,{a:t}),t}}(),function(){s.d=function(a,t){for(var e in t)s.o(t,e)&&!s.o(a,e)&&Object.defineProperty(a,e,{enumerable:!0,get:t[e]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(a){if("object"===typeof window)return window}}()}(),function(){s.o=function(a,t){return Object.prototype.hasOwnProperty.call(a,t)}}(),function(){var a={524:0};s.O.j=function(t){return 0===a[t]};var t=function(t,e){var n,l,c=e[0],i=e[1],o=e[2],r=0;if(c.some((function(t){return 0!==a[t]}))){for(n in i)s.o(i,n)&&(s.m[n]=i[n]);if(o)var u=o(s)}for(t&&t(e);r<c.length;r++)l=c[r],s.o(a,l)&&a[l]&&a[l][0](),a[l]=0;return s.O(u)},e=self["webpackChunkmolnyads"]=self["webpackChunkmolnyads"]||[];e.forEach(t.bind(null,0)),e.push=t.bind(null,e.push.bind(e))}();var e=s.O(void 0,[504],(function(){return s(6069)}));e=s.O(e)})();
//# sourceMappingURL=app.fc0d4705.js.map